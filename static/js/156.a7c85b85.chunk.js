"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[156],{6156:(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var o=t(9060);const i="ProfileInfo_descriptionBlock__XBXuJ",r="ProfileInfo_fullName__3fR7R",a="ProfileInfo_profileAvatar__2yGqg",n="ProfileInfo_contact__sQB8W";var l=t(2484),c=t(8616),d=t(2496);const p=e=>{let[s,t]=(0,o.useState)(!1),[i,r]=(0,o.useState)(e.status);(0,o.useEffect)((()=>{r(e.status)}),[e.status]);return(0,d.jsxs)("div",{children:[!s&&(0,d.jsx)("div",{children:(0,d.jsxs)("span",{onDoubleClick:()=>{t(!0)},children:["Status: ",e.status||"-----"]})}),s&&(0,d.jsxs)("div",{children:["Status: ",(0,d.jsx)("input",{value:i,onBlur:()=>{t(!1),e.updateStatus(i)},onChange:e=>{r(e.currentTarget.value)},autoFocus:!0})]})]})};var u=t(6648),h=t(9256),f=t(9464);const x=(0,f.c)({form:"profile-redux-form",destroyOnUnmount:!1})((e=>{let{handleSubmit:s,profile:t,error:o}=e;return(0,d.jsxs)("form",{onSubmit:s,children:[(0,d.jsxs)("div",{className:r,children:[(0,d.jsx)("b",{children:"Full name:"})," ",(0,d.jsx)(h.c,{name:"fullName",component:"input",type:"text",placeholder:"Full name"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Looking for a job:"}),(0,d.jsx)(h.c,{name:"lookingForAJob",component:"input",type:"checkbox"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"My professionl skils:"})," ",(0,d.jsx)(h.c,{name:"lookingForAJobDescription",component:"textarea",type:"text",placeholder:"My professionl skils"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"About me:"}),(0,d.jsx)(h.c,{name:"aboutMe",component:"textarea",type:"text",placeholder:"About me"})]}),(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:"Contacts:"})}),Object.keys(t.contacts).map((e=>(0,d.jsxs)("div",{className:n,children:[(0,d.jsxs)("b",{children:[e,":"]})," ",(0,d.jsx)(h.c,{name:"contacts."+e,component:"input",type:"text",placeholder:e})]},e))),o&&(0,d.jsx)("div",{className:u.c.formSummaryError,children:o}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Save"})})]})})),j=e=>{let{contactTitle:s,contactValue:t}=e;if(t)return(0,d.jsxs)("div",{className:n,children:[(0,d.jsxs)("b",{children:[s,":"]})," ",t]})},m=e=>(0,d.jsxs)("div",{children:[e.isOwner&&(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:e.goToEditMode,children:"Edit"})}),(0,d.jsx)("div",{className:r,children:e.profile.fullName}),(0,d.jsx)(p,{status:e.status,updateStatus:e.updateStatus}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJobDescription&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"My professionl skils:"})," ",e.profile.lookingForAJobDescription]}),e.profile.aboutMe&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"About me:"})," ",e.profile.aboutMe]}),e.profile.contacts.github||e.profile.contacts.vk||e.profile.contacts.facebook||e.profile.contacts.instagram||e.profile.contacts.twitter||e.profile.contacts.website||e.profile.contacts.youtube||e.profile.contacts.mainLink?(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:"Contacts:"})}):"",Object.keys(e.profile.contacts).map((s=>(0,d.jsx)(j,{contactTitle:s,contactValue:e.profile.contacts[s]},s)))]}),v=e=>{let[s,t]=(0,o.useState)(!1);return e.profile?(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:i,children:[(0,d.jsxs)("div",{className:a,children:[(0,d.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:c}),e.isOwner&&(0,d.jsx)("input",{type:"file",onChange:s=>{s.target.files.length&&e.savePhoto(s.target.files[0])}})]}),s?(0,d.jsx)(x,{initialValues:e.profile,profile:e.profile,onSubmit:s=>{e.saveProfile(s).then((e=>{0!=e&&t(!1)}))}}):(0,d.jsx)(m,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,goToEditMode:()=>{t(!0)}})]})}):(0,d.jsx)(l.c,{})};var b=t(9972);const g="MyPosts_postBlock__dvM-z",P="MyPosts_posts__GSiZ2",k="Post_item__Yu4oG",S=e=>(0,d.jsxs)("div",{className:k,children:[(0,d.jsx)("img",{src:"https://imgix.bustle.com/uploads/image/2022/12/22/bc9d8fc7-5855-431a-820c-51ebeb6c7fcf-3e2ba297-d13b-4d9c-b91c-622b2c9a46dd-avatar-the-way-of-water612-4.jpg?w=350&fit=crop&crop=faces&auto=format%2Ccompress"}),e.message,(0,d.jsx)("div",{children:(0,d.jsxs)("span",{children:[e.likeCount," like(s)"]})})]});var _=t(1960),w=t(2628);const y=(0,f.c)({form:"addNewPostForm"})((e=>(0,d.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,d.jsx)("div",{children:(0,d.jsx)(h.c,{component:w.I,name:"newPost",placeholder:"Enter new post",validate:[_.a,(0,_.w)(15)]})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Add post"})})]}))),N=o.memo((e=>{let s=[...e.posts].reverse().map((e=>(0,d.jsx)(S,{message:e.post,likeCount:e.likeCount},e.id)));return(0,d.jsxs)("div",{className:g,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)(y,{onSubmit:s=>{e.addPost(s.newPost)}}),(0,d.jsx)("div",{className:P,children:s})]})}));var R=t(624);const C=(0,R.Ul)((e=>({posts:e.profilePage.posts,newPostText:e.profilePage.newPostText})),(e=>({addPost:s=>{e((0,b.GO)(s))}})))(N),I=e=>(0,d.jsxs)("div",{children:[(0,d.jsx)(v,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,d.jsx)(C,{store:e.store})]});var M=t(1560),A=(t(2520),t(5773));class T extends o.Component{constructor(){super(...arguments),this.state={isRedirectRoLogin:!1},this.activateRedirectToLogin=()=>{this.setState({isRedirectRoLogin:!0})},this.deactivateRedirectToLogin=()=>{this.setState({isRedirectRoLogin:!1})}}refreshProfile(){let e=this.props.router.params.profileId;e||(e=this.props.currentUserId,e||this.activateRedirectToLogin()),e&&(this.props.getProfile(e),this.props.getStatus(e))}componentDidMount(){this.refreshProfile()}componentDidUpdate(e,s,t){this.props.router.params.profileId!=e.router.params.profileId&&this.refreshProfile()}render(){return this.state.isRedirectRoLogin?(this.deactivateRedirectToLogin(),(0,d.jsx)(M.YX,{to:"/login"})):(0,d.jsx)("div",{children:(0,d.jsx)(I,{...this.props,isOwner:!this.props.router.params.profileId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}const L=(0,A.Jn)((e=>function(s){let t=(0,M.IT)(),o=(0,M.i6)(),i=(0,M.W4)();return(0,d.jsx)(e,{...s,router:{location:t,navigate:o,params:i}})}),(0,R.Ul)((e=>({profile:e.profilePage.profile,currentUserId:e.auth.userId,isAuth:e.auth.isAuth,status:e.profilePage.status})),{getProfile:b.u_,getStatus:b.g3,updateStatus:b.u6,savePhoto:b.Eb,saveProfile:b.BV}))(T)},8616:(e,s,t)=>{e.exports=t.p+"static/media/avatar_default.99b08e94f781d8d8eef4.png"}}]);
//# sourceMappingURL=156.a7c85b85.chunk.js.map